import{u as O,r as K,j as e,y as x}from"./app-B-gcvRUp.js";import{D as U,G as I}from"./Layout-D_ix8sP_.js";import{B as F}from"./button-Y3C-dlkm.js";import{C as t,a as n,b as L,c as z}from"./card-BWuODxob.js";import{I as J}from"./input-CPLovsgZ.js";import{S as o,a as m,b as j,c as p,d as h,e as g}from"./select-BUeAUOrK.js";import{T as A,a as Q,b as R,c as N,d as W,e as _}from"./table-DwwL85dm.js";import{U as X}from"./user-DhRFyd3K.js";import{B as V}from"./book-open-CopUXHUi.js";import{C as B}from"./chart-column-stacked-DXpp2Ima.js";import{S as Y}from"./scroll-text-BdCoJga1.js";import{R as Z}from"./rotate-ccw-DuK_m4hD.js";import{c as $}from"./createLucideIcon-DdylYWp8.js";import"./sheet-BdAubyhS.js";import"./index-DrPOUevp.js";import"./index-CrFLC7Re.js";import"./dropdown-menu-aQHWxJHJ.js";import"./index-BiaiJ4b9.js";/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=$("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Ne=({auth:f,jenisPenilaian:b,kelas:u,mapel:d,queryParams:s=null,dataPenilaian:c})=>{var T,M;const{toast:v}=O(),[w,S]=K.useState({}),[k,C]=K.useState(!1);s=s||{};const r=(a,i)=>{i?s[a]=i:delete s[a],x.get(route("guru.penilaian.index"),s)},D=(a,i)=>{S(l=>({...l,[a]:i}))},H=async()=>{if(!s.kelas_id||!s.mata_pelajaran_id||!s.jenis_penilaian_id){alert("Pilih kelas, mata pelajaran, dan jenis penilaian terlebih dahulu");return}C(!0);try{await x.post(route("guru.penilaian.store"),{kelas_id:s.kelas_id,mata_pelajaran_id:s.mata_pelajaran_id,jenis_penilaian_id:s.jenis_penilaian_id,nilai_siswa:Object.entries(w).map(([a,i])=>({siswa_id:a,nilai:i})),tanggal_penilaian:new Date().toISOString().split("T")[0]},{onError:()=>{v({variant:"destructive",title:"Uh oh! Something went wrong.",description:"Nilai siswa required"})},onSuccess:()=>{v({variant:"success",title:"Success!",description:"Nilai siswa berhasil di input"})}})}catch(a){console.error("Error submitting nilai:",a)}finally{C(!1)}},y=a=>{const i=u.data.find(l=>l.id.toString()===(a==null?void 0:a.toString()));return i?i.nama_kelas:"-"},E=a=>{const i=d.data.find(l=>l.id.toString()===(a==null?void 0:a.toString()));return i?i.kkm:"0"},G=()=>{S({}),x.get(route("guru.penilaian.index"),{})};return e.jsx(U,{auth:f,children:e.jsxs("div",{className:"space-y-6",children:[s.kelas_id&&s.mata_pelajaran_id&&s.jenis_penilaian_id&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx(t,{className:"bg-white",children:e.jsx(n,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:e.jsx(X,{className:"h-5 w-5 text-blue-500"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Guru Pengajar"}),e.jsx("p",{className:"text-base font-semibold",children:f.user.name})]})]})})}),e.jsx(t,{className:"bg-white",children:e.jsx(n,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"p-2 bg-purple-50 rounded-lg",children:e.jsx(I,{className:"h-5 w-5 text-purple-500"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Kelas"}),e.jsx("p",{className:"text-base font-semibold",children:y(s.kelas_id)})]})]})})}),e.jsx(t,{className:"bg-white",children:e.jsx(n,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"p-2 bg-green-50 rounded-lg",children:e.jsx(V,{className:"h-5 w-5 text-green-500"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Mata Pelajaran"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-base font-semibold",children:(T=d.data.find(a=>a.id.toString()===s.mata_pelajaran_id))==null?void 0:T.nama_mata_pelajaran}),e.jsxs("p",{className:"text-xs text-gray-500",children:["KKM:"," ",E(s.mata_pelajaran_id)]})]})]})]})})}),e.jsx(t,{className:"bg-white",children:e.jsx(n,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"p-2 bg-amber-50 rounded-lg",children:e.jsx(B,{className:"h-5 w-5 text-amber-500"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Jenis Penilaian"}),e.jsx("p",{className:"text-base font-semibold",children:(M=b.data.find(a=>a.id.toString()===s.jenis_penilaian_id))==null?void 0:M.deskripsi})]})]})})})]}),e.jsxs(t,{children:[e.jsx(L,{children:e.jsx(z,{className:"text-xl",children:"Input Nilai Siswa"})}),e.jsxs(n,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"space-y-2 lg:col-start-1",children:[e.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4 text-gray-500"}),"Kelas"]}),e.jsxs(o,{name:"kelas_id",value:s==null?void 0:s.kelas_id,onValueChange:a=>r("kelas_id",a),children:[e.jsx(m,{className:"w-full",children:e.jsx(j,{placeholder:"Filter kelas"})}),e.jsx(p,{children:e.jsx(h,{children:u.data.map(a=>e.jsx(g,{value:a.id.toString(),children:a.nama_kelas},a.id))})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4 text-gray-500"}),"Mata Pelajaran"]}),e.jsxs(o,{name:"mata_pelajaran_id",value:s==null?void 0:s.mata_pelajaran_id,onValueChange:a=>r("mata_pelajaran_id",a),children:[e.jsx(m,{className:"w-full",children:e.jsx(j,{placeholder:"Filter mata pelajaran"})}),e.jsx(p,{children:e.jsx(h,{children:d.data.map(a=>e.jsx(g,{value:a.id.toString(),children:a.nama_mata_pelajaran},a.id))})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4 text-gray-500"}),"Kategori Nilai"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(o,{name:"jenis_penilaian_id",value:s==null?void 0:s.jenis_penilaian_id,onValueChange:a=>r("jenis_penilaian_id",a),children:[e.jsx(m,{className:"w-full",children:e.jsx(j,{placeholder:"Filter kategori nilai"})}),e.jsx(p,{children:e.jsx(h,{children:b.data.map(a=>e.jsxs(g,{value:a.id.toString(),children:[a.deskripsi," (",a.kode_jenis_penilaian,")"]},a.id))})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(F,{onClick:G,variant:"outline",className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 hover:bg-gray-50 border-gray-200",children:[e.jsx(Z,{className:"h-4 w-4"}),"Reset Filter"]})})]})]})]}),s.kelas_id&&s.mata_pelajaran_id&&s.jenis_penilaian_id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs(A,{children:[e.jsx(Q,{children:e.jsxs(R,{className:"bg-gray-50",children:[e.jsx(N,{className:"w-16",children:"No"}),e.jsx(N,{children:"Nama Siswa"}),e.jsx(N,{className:"w-32 text-center",children:"Nilai (0-100)"})]})}),e.jsx(W,{children:c==null?void 0:c.map((a,i)=>e.jsxs(R,{children:[e.jsx(_,{children:i+1}),e.jsx(_,{children:a.siswa.nama}),e.jsx(_,{children:e.jsx(J,{type:"number",min:"0",max:"100",value:w[a.siswa.id]||a.nilai||"",onChange:l=>D(a.siswa.id,l.target.value),className:"text-center"})})]},a.siswa.id))})]})}),e.jsx("div",{className:"flex justify-end gap-3 mt-4",children:e.jsxs(F,{onClick:H,disabled:k,className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4"}),k?"Menyimpan...":"Simpan Nilai"]})})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Pilih kelas, mata pelajaran, dan jenis penilaian untuk menampilkan form input nilai"})]})]})]})})};export{Ne as default};
