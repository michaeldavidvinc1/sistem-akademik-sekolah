import{j as e,y as h,a as u}from"./app-C6BvQfMW.js";import{D as w,G as v}from"./Layout-DDyZGAlO.js";import{C,b as y,c as R,a as S}from"./card-C2_mhCTQ.js";import{B as j}from"./button-Cty40wbr.js";import{I as _}from"./input-zme8LGjU.js";import{S as T,a as F,b as L,c as B,d as I,e as G}from"./select-BRcQPxkm.js";import{T as H,a as O,b as p,c as l,d as U,e as c}from"./table-DU-2hvi8.js";import{S as V}from"./scroll-text-CMntymPa.js";import{C as E}from"./chart-column-stacked-C9dK4pq7.js";import{R as K}from"./rotate-ccw-B1OyDiYh.js";import{c as M}from"./createLucideIcon-CwxlPnlF.js";import"./sheet-BEWZsMS6.js";import"./index-dKar52BI.js";import"./index-CFeybVEG.js";import"./dropdown-menu-cRSw2iSG.js";import"./index-h2se38p0.js";/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=M("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),ce=({auth:f,kelas:g,queryParams:t=null,siswaDenganNilai:r})=>{var x;t=t||{};const o=(a,s)=>{s?t[a]=s:delete t[a],h.get(route("guru.cetak.nilai"),t)},N=Object.keys(((x=r==null?void 0:r[0])==null?void 0:x.mata_pelajaran)??{}),b=()=>{h.get(route("guru.cetak.nilai"),{})},k=a=>{u.get(`/guru/cetak-nilai/${a}`,{responseType:"blob"}).then(s=>{const i=new Blob([s.data],{type:s.headers["content-type"]}),n=document.createElement("a");n.href=window.URL.createObjectURL(i);const d=s.headers["content-disposition"];let m="raport.pdf";d&&d.includes("filename=")&&(m=d.split("filename=")[1].replace(/"/g,"")),n.download=m,n.click(),window.URL.revokeObjectURL(n.href)}).catch(s=>{console.error("Failed to download PDF",s)})};return e.jsx(w,{auth:f,children:e.jsx("div",{className:"space-y-6",children:e.jsxs(C,{children:[e.jsx(y,{children:e.jsx(R,{className:"text-xl",children:"Cetak Nilai Siswa"})}),e.jsxs(S,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"space-y-2 lg:col-start-2",children:[e.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4 text-gray-500"}),"Kelas"]}),e.jsxs(T,{name:"kelas_id",value:t==null?void 0:t.kelas_id,onValueChange:a=>o("kelas_id",a),children:[e.jsx(F,{className:"w-full",children:e.jsx(L,{placeholder:"Filter kelas"})}),e.jsx(B,{children:e.jsx(I,{children:g.data.map(a=>e.jsx(G,{value:a.id.toString(),children:a.nama_kelas},a.id))})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4 text-gray-500"}),"Nama Siswa"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{type:"text",placeholder:"Nama Siswa",name:"nama_lengkap",value:t==null?void 0:t.nama_lengkap,onBlur:a=>o("nama_lengkap",a.target.value)}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(j,{onClick:b,variant:"outline",className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 hover:bg-gray-50 border-gray-200",children:[e.jsx(K,{className:"h-4 w-4"}),"Reset Filter"]})})]})]})]}),t.kelas_id?e.jsx(e.Fragment,{children:e.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(H,{children:[e.jsx(O,{children:e.jsxs(p,{className:"bg-gray-50",children:[e.jsx(l,{className:"w-16 text-center font-semibold",children:"No"}),e.jsx(l,{className:"font-semibold text-center",children:"Nama Lengkap"}),e.jsx(l,{className:"font-semibold text-center",children:"Kelas"}),N.map((a,s)=>e.jsx(l,{className:"font-semibold text-center",children:a},s)),e.jsx(l,{className:"font-semibold text-center",children:"Rata - Rata"}),e.jsx(l,{className:"font-semibold text-center",children:"Ranking"}),e.jsx(l,{className:"font-semibold text-center",children:"Cetak"})]})}),e.jsx(U,{children:r.map((a,s)=>e.jsxs(p,{children:[e.jsx(c,{className:"text-center",children:s+1}),e.jsx(c,{className:"text-center",children:a.nama_lengkap}),e.jsx(c,{className:"text-center",children:a.kelas}),Object.entries(a.mata_pelajaran).map(([i,n])=>e.jsx(c,{className:"text-center",children:n},i)),e.jsx(c,{className:"text-center",children:a.rata_rata.toFixed(2)}),e.jsx(c,{className:"text-center",children:a.ranking}),e.jsx(c,{className:"text-center",children:e.jsxs(j,{size:"sm",className:"flex items-center gap-2",onClick:()=>k(a.siswa_id),children:[e.jsx(z,{className:"h-4 w-4"}),e.jsx("span",{children:"Cetak"})]})})]},s))})]})})})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 mb-4",children:e.jsx(v,{className:"h-8 w-8 text-gray-400"})}),e.jsx("p",{className:"text-gray-500 max-w-sm mx-auto",children:"Gunakan filter di atas untuk menampilkan data nilai siswa"})]})]})]})})})};export{ce as default};
